import smtplib
import datetime
import requests
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from requests.packages.urllib3.exceptions import InsecureRequestWarning

requests.packages.urllib3.disable_warnings(InsecureRequestWarning)

msg = MIMEMultipart('alternative')
sent_from = ["no-reply-jita@nutanix.com"]
#msg['Subject'] = 'QTMS Report' + ' | ' + datetime.datetime.now().strftime("%Y-%m-%d %H:%M")

SMTP_SERVER = "drt-it-mailrelay-prod-1.corp.nutanix.com"
SMTP_PORT = 25


class QTMSReport:

    def __init__(self, branch, tasks):
        self.template_array = []
        for i in tasks:
            jita_task_url = "https://jita.eng.nutanix.com/results?agave_task_ids=" + i[0]['$oid']
            template = """
                <tr class="left">
                    <td style="padding: 10px; text-align: center;">""" + branch + """</td>
                    <td style="padding: 10px; text-align: center;">""" + i[0]['jp_name'] + """</td>
                    <td style="padding: 10px; text-align: center;">
                        <a href=""" + jita_task_url + """>
                               """ + i[0]['$oid'] + """
                    </td>
                    <td style="padding: 10px; text-align: center;">""" + (','.join(i[0]['fqa_id'])) + """</td>
                    </tr>
                """
            self.template_array.append(template)
        self.total = str(len(tasks))


def send_email(to, msg):
    try:
        server = smtplib.SMTP(SMTP_SERVER, SMTP_PORT)
        recipients = to
        refused = server.sendmail(sent_from, recipients, msg.as_string())
        towards = set(recipients)
        refused = set(refused)
        print ('EMAILER: Sent email to :%s' % list(towards - refused))
    except smtplib.SMTPException as ex:
        print ("EMAILER: Failed to send email. Error:\n%s" % ex)


class SendEmail(object):

    def __init__(self, branch, tasks=None, jita_task_link=None, email_text=None, email_msg=None, emails=None):
        self.branch = branch
        self.tasks = tasks
        self.jita_task_link = jita_task_link
        self.email_text = email_text
        self.email_msg = email_msg
        self.emails = emails

    def build_email(self):
        new_template = QTMSReport(self.branch, self.tasks)

        to = ['bhawani.singh@nutanix.com']

        if self.emails is not None:
            to.extend(self.emails)
        #to = ['bhawani.singh@nutanix.com']

        text = '['+self.branch+']'+':'+'Nested AHV Test Run Details'+' | '+datetime.datetime.now().strftime("%Y-%m-%d %H:%M")
        if self.email_text is not None:
            text = '['+self.branch+']' + ':' + self.email_text + ' | ' + datetime.datetime.now().strftime("%Y-%m-%d %H:%M")

        msg['Subject'] = '['+self.branch+']'+':' + 'Nested AHV Test Run Details' + ' | ' + datetime.datetime.now().strftime("%Y-%m-%d %H:%M")
        if self.email_msg is not None:
            msg['Subject'] = '['+self.branch+']'+':' + self.email_msg + ' | '+datetime.datetime.now().strftime("%Y-%m-%d %H:%M")


        # use IN-LINE Styling
        html = """\
        <!DOCTYPE html>
        <html>
            <body>
                <p style="text-align: left; font-size: large"> 
                Hi All,</p>
                <p style="text-align: left; font-size: large"> 
                Please find tests run details on respective branch. Your name is added since you are the FQA for the respective job profile.
                Please triage test failures and raise test/product bugs accordingly.</p>
                <br>
                <br>
                <hr style="width: 500px;">
                <table style="margin-left: auto; margin-right: auto">
                    <tr>
                        <th>Total Job Profile Triggered : </th>
                        <th style="padding-left: 100px">""" + new_template.total + """</th>
                    </tr>
                </table>
                <hr class="width">
    
                <table border="2" rules="all" style="margin-left: auto; margin-right: auto">
                    <tr style="background-color:DodgerBlue">
                        <th style="text-align: center;"> Branch </th>
                        <th style="text-align: center;"> Job Profile </th>
                        <th style="text-align: center;"> Task ID </th>
                        <th style="padding-left: 20px;"> FQA ID </th>
                    </tr>
                    """ + ''.join(new_template.template_array) + """
                </table>
    
                <table style="margin-left: auto; margin-right: auto">
                    <tr>
                        <th>Overall Task Link :</th>
                    <tr>
                </table>
                <hr style="width: 500px;">
                <table style="margin-left: auto; margin-right: auto">
                    <tr>
                        <th style="padding-left: 100px">""" + self.jita_task_link + """</th>
                    </tr>
                </table>
                <hr class="width">
                
                <hr style="width: 500px;">
                    <table style="margin-left: auto; margin-right: auto; padding: 10px;">
                        <tr>
                            <th> Thank You! </th>
                        </tr>
                        <tr>
                            <th> Acropolis Regression </th>
                        </tr>
                    </table>
                <hr style="width: 500px;">
    
            </body>
        </html>
        """

        part1 = MIMEText(text, 'plain')
        part2 = MIMEText(html, 'html')

        msg.attach(part1)
        msg.attach(part2)

        send_email(to, msg)


#tasks = [{'task_id': '1', 'tasks_status': 'Pending'}]
# branch = 'master'
# tasks = [[{u'$oid': u'5c71a41f92491e073fd6f255', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_5.11', 'task_status': u'pending'}],
#          [{u'$oid': u'5c71a42392491e073fd6f3bc', 'jp_name': u'Regression_Acropolis_MTS_Nutest_api_stress_general_5.11', 'task_status': u'pending'}],
#          [{u'$oid': u'5c71a42692491e073fd6f3ca', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Frodo_5.11', 'task_status': u'processing'}]]
# jita_task_link = "https://jita.eng.nutanix.com/results?agave_task_ids=5c71a41f92491e073fd6f255,5c71a42392491e073fd6f3bc,5c71a42692491e073fd6f3ca"
# build_email(branch, tasks, jita_task_link)

# branch = 'master'
# tasks = [[{u'$oid': u'5d84cb597b48b163ad14b849', 'jp_name': 'AHV_Regression_Catalog_GoldSuite', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5d84cb5a7b48b163ad14b84f', 'jp_name': 'AHV_Regression_HA_Scheduler_GoldSuite', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5d84cb5c7b48b163ad14b85d', 'jp_name': 'AHV_Regression_GuestOS_GoldSuite', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5d84cb5e7b48b163ad14b86d', 'jp_name': 'AHV_Regression_GPU_GoldSuite', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5d84cb5f7b48b163ad14b874', 'jp_name': 'AHV_Regression_Uhura_GoldSuite', 'fqa_id': '', 'task_status': ''}]]
# jita_task_link = "https://jita.eng.nutanix.com/results?agave_task_ids=5d84cb597b48b163ad14b849,5d84cb5a7b48b163ad14b84f,5d84cb5c7b48b163ad14b85d,5d84cb5e7b48b163ad14b86d,5d84cb5f7b48b163ad14b874"
# build_email(branch, tasks, jita_task_link)

# branch = 'euphrates-5.16-stable'
# emails = ['bhawani.singh@nutanix.com', 'velurusruthi.naidu@nutanix.com']
# email_text = 'Acropolis Regression Reg Handedover Test Run Details'
# email_msg = 'Acropolis Regression Reg Handedover Test Run Details'
# tasks = [[{u'$oid': u'5dc061057b48b1f14bddda55', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_XI_Catalog_remote_seed_5.16', 'sub-component': 'catalog', 'fqa_id': [u'velurusruthi.naidu@nutanix.com', u'bhawani.singh@nutanix.com', u'acropolis-catalog@nutanix.com', u'vivekanandan.k@nutanix.com'], 'task_status': ''}], [{u'$oid': u'5dc061077b48b1f14bddda5f', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_XI_Catalog_Cluster_Selection_5.16', 'sub-component': 'catalog', 'fqa_id': [u'velurusruthi.naidu@nutanix.com', u'bhawani.singh@nutanix.com', u'acropolis-catalog@nutanix.com', u'vivekanandan.k@nutanix.com'], 'task_status': ''}], [{u'$oid': u'5dc0610a7b48b1f14bddda97', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_XI_Catalog_Optimized_Checkout_5.16', 'sub-component': 'catalog', 'fqa_id': [u'velurusruthi.naidu@nutanix.com', u'bhawani.singh@nutanix.com', u'acropolis-catalog@nutanix.com', u'vivekanandan.k@nutanix.com'], 'task_status': ''}], [{u'$oid': u'5dc0610c7b48b1f14bdddab2', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_XI_Catalog_5.16', 'sub-component': 'catalog', 'fqa_id': [u'velurusruthi.naidu@nutanix.com', u'bhawani.singh@nutanix.com', u'acropolis-catalog@nutanix.com', u'vivekanandan.k@nutanix.com'], 'task_status': ''}], [{u'$oid': u'5dc0610f7b48b1f14bdddb11', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_batch_vm_pc_5.16', 'sub-component': 'batch-vms', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061117b48b1f14bdddb1a', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_batch_vm_pc_Xi_5.16', 'sub-component': 'batch-vms', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061137b48b1f14bdddb23', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Metropolis_xi_5.16', 'sub-component': 'metropolis', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061167b48b1f14bdddb33', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Metropolis_5.16', 'sub-component': 'metropolis', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061187b48b1f14bdddb4d', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Audit_5.16', 'sub-component': 'audit', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0611a7b48b1f14bdddb5d', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_api_stress_general_5.16', 'sub-component': 'api-stress', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0611d7b48b1f14bdddb6c', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Frodo_5.16', 'sub-component': 'frodo', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0611f7b48b1f14bdddb84', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_CO_AHV_5.16', 'sub-component': 'ahv-co', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061217b48b1f14bdddb96', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Host_Agent_Test_5.16', 'sub-component': 'host-agent', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061237b48b1f14bdddb9a', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_HA_Twonode_5.16', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061257b48b1f14bdddba2', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_AOS_NS_5.16', 'sub-component': 'aos-ns', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061277b48b1f14bdddba8', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_AHV_NS_5.16', 'sub-component': 'ahv-ns', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061297b48b1f14bdddbaf', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Acropolis_Vm_Management_5.16', 'sub-component': 'vm-management', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0612b7b48b1f14bdddbc0', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_V3_Vm_Management_5.16', 'sub-component': 'v3-vm-management', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0612d7b48b1f14bdddbd8', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Webhooks_5.16', 'sub-component': 'webhooks', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061307b48b1f14bdddbe8', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_CO_AOS_5.16', 'sub-component': 'ahv-co', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061327b48b1f14bdddbf7', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_ACLI_Scheduling_5.16', 'sub-component': 'scheduler-acli', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061347b48b1f14bdddc16', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Storage_Persona_5.16', 'sub-component': 'storage-persona', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061367b48b1f14bdddc25', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Scheduler_Defrag_5.16', 'sub-component': 'storage-persona', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0613a7b48b1f14bdddc3a', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Vnuma_5.16', 'sub-component': 'vnuma', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0613c7b48b1f14bdddc4a', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_api_Vcpu_stress_5.16', 'sub-component': 'vnuma', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0613e7b48b1f14bdddc4e', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_XI_API_Tests_FEAT-6906_5.16', 'sub-component': 'xi-manageability', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061407b48b1f14bdddc7b', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Xi_Telemetry_FEAT_4361_5.16', 'sub-component': 'xi-manageability', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061427b48b1f14bdddc89', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_XI_API_Tests_FEAT-6626_5.16', 'sub-component': 'xi-manageability', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061447b48b1f14bdddc8e', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_XI_Pairing_API_5.16', 'sub-component': 'xi-manageability', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061467b48b1f14bdddc93', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_XI_Pairing_OP-xi_API_5.16', 'sub-component': 'xi-manageability', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061477b48b1f14bdddc99', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_1_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061487b48b1f14bdddcb0', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_2_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061497b48b1f14bdddcc7', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_3_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0614a7b48b1f14bdddcda', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_4_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0614c7b48b1f14bdddcf1', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_5_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0614d7b48b1f14bdddd05', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_6_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0614e7b48b1f14bdddd1b', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_WLC_1_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0614f7b48b1f14bdddd2b', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_WLC_2_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061507b48b1f14bdddd3a', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_WI_1_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061517b48b1f14bdddd47', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_WI_2_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061537b48b1f14bdddd54', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LI_1_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061547b48b1f14bdddd6b', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LI_2_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061557b48b1f14bdddd82', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LI_3_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061567b48b1f14bdddd92', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_1_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061577b48b1f14bdddda9', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_2_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061597b48b1f14bddddc0', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_3_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0615a7b48b1f14bddddd4', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_4_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0615b7b48b1f14bddddeb', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_5_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0615c7b48b1f14bddde02', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_6_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0615e7b48b1f14bddde17', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_7_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0615f7b48b1f14bddde29', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_WVDT_1_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061607b48b1f14bddde3b', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_WVDT_2_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061617b48b1f14bddde48', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_WVT_1_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061627b48b1f14bddde54', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Guest_OS_WVT_2_5.16', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061657b48b1f14bddde60', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Affinity_scheduling_policies_Set_1_5.16', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061687b48b1f14bddde99', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Affinity_scheduling_policies_Set_2_5.16', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0616a7b48b1f14bdddea6', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Affinity_scheduling_policies_Set_3_5.16', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0616c7b48b1f14bdddeaa', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_HA_Set_1_5.16', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc0616e7b48b1f14bdddee6', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_HA_Set_2_5.16', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061707b48b1f14bdddef0', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_HA_Set_3_5.16', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061737b48b1f14bdddef4', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Ads_Set_1_5.16', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061757b48b1f14bdddf0d', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Ads_Set_2_5.16', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc061777b48b1f14bdddf15', 'category': 'reg-handedover', 'branch': u'euphrates-5.16-stable', 'jp_name': u'Regression_Acropolis_MTS_Nutest_Scheduler_During_Upgrades_Set_1_5.16', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}]]
# jita_task_link = 'https://jita.eng.nutanix.com/results?agave_task_ids=5dc061057b48b1f14bddda55,5dc061077b48b1f14bddda5f,5dc0610a7b48b1f14bddda97,5dc0610c7b48b1f14bdddab2,5dc0610f7b48b1f14bdddb11,5dc061117b48b1f14bdddb1a,5dc061137b48b1f14bdddb23,5dc061167b48b1f14bdddb33,5dc061187b48b1f14bdddb4d,5dc0611a7b48b1f14bdddb5d,5dc0611d7b48b1f14bdddb6c,5dc0611f7b48b1f14bdddb84,5dc061217b48b1f14bdddb96,5dc061237b48b1f14bdddb9a,5dc061257b48b1f14bdddba2,5dc061277b48b1f14bdddba8,5dc061297b48b1f14bdddbaf,5dc0612b7b48b1f14bdddbc0,5dc0612d7b48b1f14bdddbd8,5dc061307b48b1f14bdddbe8,5dc061327b48b1f14bdddbf7,5dc061347b48b1f14bdddc16,5dc061367b48b1f14bdddc25,5dc0613a7b48b1f14bdddc3a,5dc0613c7b48b1f14bdddc4a,5dc0613e7b48b1f14bdddc4e,5dc061407b48b1f14bdddc7b,5dc061427b48b1f14bdddc89,5dc061447b48b1f14bdddc8e,5dc061467b48b1f14bdddc93,5dc061477b48b1f14bdddc99,5dc061487b48b1f14bdddcb0,5dc061497b48b1f14bdddcc7,5dc0614a7b48b1f14bdddcda,5dc0614c7b48b1f14bdddcf1,5dc0614d7b48b1f14bdddd05,5dc0614e7b48b1f14bdddd1b,5dc0614f7b48b1f14bdddd2b,5dc061507b48b1f14bdddd3a,5dc061517b48b1f14bdddd47,5dc061537b48b1f14bdddd54,5dc061547b48b1f14bdddd6b,5dc061557b48b1f14bdddd82,5dc061567b48b1f14bdddd92,5dc061577b48b1f14bdddda9,5dc061597b48b1f14bddddc0,5dc0615a7b48b1f14bddddd4,5dc0615b7b48b1f14bddddeb,5dc0615c7b48b1f14bddde02,5dc0615e7b48b1f14bddde17,5dc0615f7b48b1f14bddde29,5dc061607b48b1f14bddde3b,5dc061617b48b1f14bddde48,5dc061627b48b1f14bddde54,5dc061657b48b1f14bddde60,5dc061687b48b1f14bddde99,5dc0616a7b48b1f14bdddea6,5dc0616c7b48b1f14bdddeaa,5dc0616e7b48b1f14bdddee6,5dc061707b48b1f14bdddef0,5dc061737b48b1f14bdddef4,5dc061757b48b1f14bdddf0d,5dc061777b48b1f14bdddf15'
# build_email(branch, tasks, jita_task_link, email_text, email_msg, emails)

# tasks = [[{u'$oid': u'5dc6ee837b48b1b0a4196d42', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_XI_Catalog_remote_seed_master', 'sub-component': 'catalog', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ee867b48b1b0a4196d4c', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_XI_Catalog_Cluster_Selection_master', 'sub-component': 'catalog', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ee8a7b48b1b0a4196d85', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_XI_Catalog_Optimized_Checkout_master', 'sub-component': 'catalog', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ee8d7b48b1b0a4196da2', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_XI_Catalog_master', 'sub-component': 'catalog', 'fqa_id': [u'velurusruthi.naidu@nutanix.com', u'bhawani.singh@nutanix.com', u'acropolis-catalog@nutanix.com', u'vivekanandan.k@nutanix.com'], 'task_status': ''}], [{u'$oid': u'5dc6ee907b48b1b0a4196e01', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_batch_vm_pc_master', 'sub-component': 'batch-vms', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ee937b48b1b0a4196e0a', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_batch_vm_pc_Xi_master', 'sub-component': 'batch-vms', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ee957b48b1b0a4196e13', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Metropolis_xi_master', 'sub-component': 'metropolis', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ee987b48b1b0a4196e23', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Metropolis_master', 'sub-component': 'metropolis', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ee9a7b48b1b0a4196e3d', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Audit_master', 'sub-component': 'audit', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ee9d7b48b1b0a4196e4d', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_AHV_NS_master', 'sub-component': 'ahv-ns', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ee9f7b48b1b0a4196e54', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_api_stress_general_master', 'sub-component': 'api-stress', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eea17b48b1b0a4196e65', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Frodo_master', 'sub-component': 'frodo', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eea47b48b1b0a4196e7d', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_CO_AHV_master', 'sub-component': 'ahv-co', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eea67b48b1b0a4196e91', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Host_Agent_Test_master', 'sub-component': 'host-agent', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eea87b48b1b0a4196e95', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_api_Vcpu_stress_master', 'sub-component': 'vnuma', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeab7b48b1b0a4196e9b', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_HA_Twonode_master', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eead7b48b1b0a4196ea3', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_AOS_NS_master', 'sub-component': 'aos-ns', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeaf7b48b1b0a4196ea9', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Acropolis_Vm_Management_master', 'sub-component': 'vm-management', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeb17b48b1b0a4196eba', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_V3_Vm_Management_master', 'sub-component': 'v3-vm-management', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeb57b48b1b0a4196ed2', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Webhooks_master', 'sub-component': 'webhooks', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeb77b48b1b0a4196ee2', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_CO_AOS_master', 'sub-component': 'ahv-co', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeba7b48b1b0a4196ef1', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_ACLI_Scheduling_master', 'sub-component': 'scheduler-acli', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eebd7b48b1b0a4196f10', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Storage_Persona_master', 'sub-component': 'storage-persona', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eebf7b48b1b0a4196f21', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Scheduler_Defrag_master', 'sub-component': 'storage-persona', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eec27b48b1b0a4196f36', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Gpu_Passthrough_master', 'sub-component': 'gpu', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eec57b48b1b0a4196f4a', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_VGpu_master', 'sub-component': 'gpu', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eec97b48b1b0a4196f87', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_GPU_Compute_Mode_master', 'sub-component': 'gpu', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eecb7b48b1b0a4196f8e', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Vnuma_master', 'sub-component': 'vnuma', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eecf7b48b1b0a4196f9e', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_XI_API_Tests_FEAT-6906_master', 'sub-component': 'xi-manageability', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eed17b48b1b0a4196fce', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Xi_Telemetry_FEAT_4361_master', 'sub-component': 'xi-manageability', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eed47b48b1b0a4196fdc', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_XI_API_Tests_FEAT-6626_master', 'sub-component': 'xi-manageability', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eed77b48b1b0a4196fe1', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_XI_Pairing_API_master', 'sub-component': 'xi-manageability', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eed97b48b1b0a4196fe6', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_XI_Pairing_OP-xi_API_master', 'sub-component': 'xi-manageability', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeda7b48b1b0a4196fef', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_1_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eedc7b48b1b0a419700a', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_2_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eedd7b48b1b0a4197021', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_3_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eedf7b48b1b0a4197034', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_4_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eee07b48b1b0a419704b', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_5_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eee27b48b1b0a419705f', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LLC_6_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eee37b48b1b0a4197072', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_WLC_1_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eee47b48b1b0a4197082', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_WLC_2_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eee57b48b1b0a4197091', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_WI_1_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eee77b48b1b0a419709e', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_WI_2_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eee87b48b1b0a41970ab', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LI_1_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeea7b48b1b0a41970c2', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LI_2_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeeb7b48b1b0a41970d9', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LI_3_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeec7b48b1b0a41970e9', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_1_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeee7b48b1b0a4197100', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_2_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eeef7b48b1b0a4197117', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_3_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eef17b48b1b0a419712b', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_4_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eef27b48b1b0a4197142', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_5_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eef47b48b1b0a4197159', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_6_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eef57b48b1b0a419716e', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_LVDT_7_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eef77b48b1b0a4197180', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_WVDT_1_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eef87b48b1b0a4197192', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_WVDT_2_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eefa7b48b1b0a419719f', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_WVT_1_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eefb7b48b1b0a41971ab', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Guest_OS_WVT_2_master', 'sub-component': 'ahv-guest-os', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6eefe7b48b1b0a41971b7', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Affinity_scheduling_policies_Set_1_master', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ef017b48b1b0a41971f0', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Affinity_scheduling_policies_Set_2_master', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ef047b48b1b0a41971fd', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Affinity_scheduling_policies_Set_3_master', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ef077b48b1b0a4197201', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_HA_Set_1_master', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ef0b7b48b1b0a419723d', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_HA_Set_2_master', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ef0d7b48b1b0a4197247', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_HA_Set_3_master', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ef107b48b1b0a419724b', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Ads_Set_1_master', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ef147b48b1b0a4197265', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Ads_Set_2_master', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}], [{u'$oid': u'5dc6ef167b48b1b0a419726e', 'category': 'reg-handedover', 'branch': u'master', 'jp_name': 'Regression_Acropolis_MTS_Nutest_Scheduler_During_Upgrades_Set_1_master', 'sub-component': 'scheduler', 'fqa_id': '', 'task_status': ''}]]
#
# branch = 'master'
# emails = ['bhawani.singh@nutanix.com', 'velurusruthi.naidu@nutanix.com', 'ritopa.dey@nutanix.com']
# email_text = 'Acropolis Regression Reg Handedover Test Run Details'
# email_msg = 'Acropolis Regression Reg Handedover Test Run Details'
# jita_task_link = 'https://jita.eng.nutanix.com/results?agave_task_ids=5dc6ee837b48b1b0a4196d42,5dc6ee867b48b1b0a4196d4c,5dc6ee8a7b48b1b0a4196d85,5dc6ee8d7b48b1b0a4196da2,5dc6ee907b48b1b0a4196e01,5dc6ee937b48b1b0a4196e0a,5dc6ee957b48b1b0a4196e13,5dc6ee987b48b1b0a4196e23,5dc6ee9a7b48b1b0a4196e3d,5dc6ee9d7b48b1b0a4196e4d,5dc6ee9f7b48b1b0a4196e54,5dc6eea17b48b1b0a4196e65,5dc6eea47b48b1b0a4196e7d,5dc6eea67b48b1b0a4196e91,5dc6eea87b48b1b0a4196e95,5dc6eeab7b48b1b0a4196e9b,5dc6eead7b48b1b0a4196ea3,5dc6eeaf7b48b1b0a4196ea9,5dc6eeb17b48b1b0a4196eba,5dc6eeb57b48b1b0a4196ed2,5dc6eeb77b48b1b0a4196ee2,5dc6eeba7b48b1b0a4196ef1,5dc6eebd7b48b1b0a4196f10,5dc6eebf7b48b1b0a4196f21,5dc6eec27b48b1b0a4196f36,5dc6eec57b48b1b0a4196f4a,5dc6eec97b48b1b0a4196f87,5dc6eecb7b48b1b0a4196f8e,5dc6eecf7b48b1b0a4196f9e,5dc6eed17b48b1b0a4196fce,5dc6eed47b48b1b0a4196fdc,5dc6eed77b48b1b0a4196fe1,5dc6eed97b48b1b0a4196fe6,5dc6eeda7b48b1b0a4196fef,5dc6eedc7b48b1b0a419700a,5dc6eedd7b48b1b0a4197021,5dc6eedf7b48b1b0a4197034,5dc6eee07b48b1b0a419704b,5dc6eee27b48b1b0a419705f,5dc6eee37b48b1b0a4197072,5dc6eee47b48b1b0a4197082,5dc6eee57b48b1b0a4197091,5dc6eee77b48b1b0a419709e,5dc6eee87b48b1b0a41970ab,5dc6eeea7b48b1b0a41970c2,5dc6eeeb7b48b1b0a41970d9,5dc6eeec7b48b1b0a41970e9,5dc6eeee7b48b1b0a4197100,5dc6eeef7b48b1b0a4197117,5dc6eef17b48b1b0a419712b,5dc6eef27b48b1b0a4197142,5dc6eef47b48b1b0a4197159,5dc6eef57b48b1b0a419716e,5dc6eef77b48b1b0a4197180,5dc6eef87b48b1b0a4197192,5dc6eefa7b48b1b0a419719f,5dc6eefb7b48b1b0a41971ab,5dc6eefe7b48b1b0a41971b7,5dc6ef017b48b1b0a41971f0,5dc6ef047b48b1b0a41971fd,5dc6ef077b48b1b0a4197201,5dc6ef0b7b48b1b0a419723d,5dc6ef0d7b48b1b0a4197247,5dc6ef107b48b1b0a419724b,5dc6ef147b48b1b0a4197265,5dc6ef167b48b1b0a419726e'
#
# b = SendEmail(branch, tasks, jita_task_link, email_text, email_msg, emails)
# b.build_email()
